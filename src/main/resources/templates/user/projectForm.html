<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{/common/layout.html :: dynamic(~{::main})}">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<div th:fragment="main">
  <!-- Existing HTML content -->
  <div class="item-details-page">
    <div class="container">
      <div class="row">

        <div class="col-lg-12">
          <div class="section-heading">
            <div class="line-dec"></div>
            <h2>Upload <em>Your Job</em> Here.</h2>
          </div>
        </div>
        <div class="col-lg-12">
          <form id="contact" action="/createproject" method="post" enctype="multipart/form-data">
            <div class="row">
              <div class="col-lg-6">
                <fieldset>
                  <label for="title">JOB TITLE</label>
                  <input type="text" name="projectName" id="title"
                         placeholder="Ex. PROJECT #200" autocomplete="on" required>
                </fieldset>
              </div>
              <div class="col-lg-6">
                <fieldset>
                  <label for="description">JOB TYPE</label>
                  <select name="projectField.fieldId" id="description">
                    <option value="1">Field 1</option>
                    <option value="2">Field 2</option>
                    <!-- Add more options as needed -->
                  </select>
                </fieldset>
              </div>
              <div class="col-lg-6">
                <fieldset>
                  <label for="username">Date created</label>
                  <input type="date" name="deadline" id="username" placeholder=""
                         autocomplete="on" required>
                </fieldset>
              </div>

              <div class="col-lg-6">
                <fieldset>
                  <label for="price">SOLANA </label>
                  <input type="text" name="fundingGoal" id="price"
                         placeholder="The money you pay for your freelancer   Ex. 0.06 ETH"
                         autocomplete="on" required>
                </fieldset>
              </div>

              <div class="col-lg-12">
                <div class="form-group">
                  <label for="exampleFormControlTextarea1">Job description</label>
                  <textarea name="projectDescription" class="form-control"
                            id="exampleFormControlTextarea1"
                            placeholder="Give your freelancer the job details" rows="3"></textarea>
                </div>

              </div>

              <div class="col-lg-4">
                <br>
                <fieldset>
                  <label for="file">Your File</label>
                  <input type="file" id="file" name="image" accept="image/png, image/jpeg" />
                </fieldset>
              </div>
              <div class="col-lg-8">
                <br>
                <fieldset>
                  <button type="submit" id="form-submit" class="orange-button">Upload Your Job</button>
                </fieldset>
              </div>
            </div>
          </form>
        </div>
        <div class="col-lg-12">
          <div class="section-heading">
            <div class="line-dec"></div>
            <h2>This Is <em>Your Job</em> Preview.</h2>
          </div>
        </div>
        <div class="col-lg-7">
          <div class="left-image">
            <img src="assets/images/create-yours.jpg" alt="" style="border-radius: 20px;">
          </div>
        </div>
        <div class="col-lg-5 align-self-center">
          <h4>Dolores Haze Westworld Eye</h4>
          <span class="author">
                        <img src="assets/images/author-02.jpg" alt=""
                             style="max-width: 50px; border-radius: 50%;">
                        <h6>Kataleya Smithee<br><a href="#">@kataleey</a></h6>
                    </span>
          <p>Lorem ipsum dolor sit amet, consectetu dipiscingei elit, sed do eiusmod tempor incididunt ut labore
            et
            dolore magna aliqua.</p>
          <div class="row">
            <div class="col-3">
                            <span class="bid">
                                Job Payout<br><strong>0.06 SOL</strong><br><em>($8055,35)</em>
                            </span>
            </div>
            <div class="col-4">
                            <span class="owner">
                                Owner<br><strong>Alan Smithee</strong><br><em>(@asmithee)</em>
                            </span>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.getElementById("contact").addEventListener("submit", function (event) {
      event.preventDefault();

      var formData = new FormData(this);
      var fileInput = document.getElementById("file");
      formData.append("image", fileInput.files[0]);

      $.ajax({
        type: "POST",
        enctype: 'multipart/form-data',
        url: "/createproject",
        data: formData,
        processData: false,
        contentType: false,
        cache: false,
        success: function (data) {
          // Handle success, e.g., display a success message
          alert("Project created successfully!");
          // Optionally, redirect to another page
          // window.location.href = "/home";
        },
        error: function (error) {
          console.log("Error:", error);
          // Handle error as needed
          alert("Error creating project. Please try again.");
        }
      });
    });
  </script>
</div>
</body>
</html>